<!doctype html>
<html lang="id">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Orders</title><link rel="stylesheet" href="../css/style.css"></head>
<body>
  <header class="site-header"><h1>Admin - Orders</h1><nav><a href="dashboard.html">Dashboard</a> <a href="payments.html">Payments</a> <a href="menu_manage.html">Menus</a></nav></header>
  <main class="container">
    <h2>All Orders</h2>
    <div id="orders-list"></div>
  </main>
  <script src="../js/api_ooad.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      PSApi.getAllOrders().then(list=>{
        const box=document.getElementById('orders-list');
        if(!list || !list.length) { box.textContent='No orders'; return; }
        list.forEach(o=>{ 
          const el=document.createElement('div'); el.className='card'; 
          const date = o.order_date ? o.order_date.split('T')[0] : 'N/A';
          el.innerHTML=`<h4>Order ${o.order_id}</h4><div>Customer: ${o.customer_id}</div><div>Date: ${date}</div><div>Status: ${o.status}</div><div style="margin-top:.5rem"><a class="btn" href="payments.html">View Payments</a></div>`; 
          box.appendChild(el);
        });
      }).catch(err=>{
        document.getElementById('orders-list').textContent = 'Error: ' + (err.message || err);
      });
    });
  </script>
  <script src="../js/app.js"></script>
</body>
</html>
