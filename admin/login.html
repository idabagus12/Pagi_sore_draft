<!doctype html>
<html lang="id">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin Login</title><link rel="stylesheet" href="../css/style.css"></head>
<body>
  <header class="site-header"><h1>Admin â€” Pagi Sore</h1></header>
  <main class="container">
    <h2>Admin Login</h2>
    <form id="admin-login">
      <div class="form-group"><label>Username</label><input name="username"></div>
      <div class="form-group"><label>Password</label><input name="password" type="password"></div>
      <div style="margin-top:.5rem"><button class="btn" type="submit">Login</button></div>
    </form>
  </main>
  <script src="../js/api_ooad.js"></script>
  <script>
    document.getElementById('admin-login').addEventListener('submit',e=>{
      e.preventDefault(); 
      const f = e.target;
      const username = f.username.value;
      const password = f.password.value;
      
      if(!username || !password){ alert('Username dan password harus diisi'); return; }
      
      PSApi.adminLogin({username, password}).then(res=>{
        console.log('Admin login response:', res);
        alert('Admin login berhasil');
        window.location.href = 'dashboard.html';
      }).catch(err=>{
        console.error('Admin login error:', err);
        alert('Login gagal: ' + (err.message || JSON.stringify(err)));
      });
    })
  </script>
</body>
</html>
